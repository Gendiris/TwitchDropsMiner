<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twitch Drops Miner Web UI</title>
  <link rel="stylesheet" href="/webui/styles.css">
</head>
<body>
  <header>
    <h1>Twitch Drops Miner</h1>
    <p class="subtitle">Lightweight Web UI (auto-refreshes every ~2.5s)</p>
  </header>

  <main>
    <section class="card">
      <h2>Controls</h2>
      <div class="controls">
        <button id="startBtn">Start</button>
        <button id="stopBtn">Stop</button>
        <button id="reloadBtn">Reload</button>
      </div>
      <div class="switcher">
        <label for="channelInput">Switch channel (ID, login, or empty for auto):</label>
        <div class="inline">
          <input id="channelInput" type="text" placeholder="channel id/login or leave blank">
          <button id="switchBtn">Switch</button>
        </div>
      </div>
      <div id="actionStatus" class="status-message"></div>
    </section>

    <section class="grid">
      <article class="card">
        <h2>Runtime Status</h2>
        <div class="runtime-row"><strong>State:</strong> <span id="stateText">-</span></div>
        <div class="runtime-row"><strong>Watching:</strong> <span id="watchingText">-</span></div>
        <div class="runtime-row"><strong>Pending switch:</strong> <span id="pendingSwitchText">-</span></div>
        <div class="runtime-row"><strong>Last reload:</strong> <span id="lastReloadText">-</span></div>
        <div class="runtime-row"><strong>Errors (last 10):</strong>
          <ul id="errorsList"></ul>
        </div>
      </article>

      <article class="card">
        <h2>Settings</h2>
        <form id="settingsForm">
          <label>
            Language
            <input type="text" name="language">
          </label>
          <label>
            Proxy (URL)
            <input type="text" name="proxy" placeholder="http://user:pass@host:port">
          </label>
          <label>
            Priority (comma separated)
            <input type="text" name="priority">
          </label>
          <label>
            Exclude (comma separated)
            <input type="text" name="exclude">
          </label>
          <label>
            Priority mode
            <select name="priority_mode">
              <option value="PRIORITY_ONLY">Priority only</option>
              <option value="ENDING_SOONEST">Ending soonest</option>
              <option value="LOW_AVBL_FIRST">Low availability first</option>
            </select>
          </label>
          <label class="checkbox">
            <input type="checkbox" name="available_drops_check"> Available drops check
          </label>
          <label class="checkbox">
            <input type="checkbox" name="enable_badges_emotes"> Enable badges/emotes
          </label>
          <label>
            Connection quality
            <input type="number" min="0" max="5" name="connection_quality">
          </label>
          <label class="checkbox">
            <input type="checkbox" name="tray_notifications"> Tray notifications
          </label>
          <label class="checkbox">
            <input type="checkbox" name="autostart_tray"> Autostart tray
          </label>
          <div class="form-actions">
            <button type="submit">Save settings</button>
            <span id="settingsStatus" class="status-message"></span>
          </div>
        </form>
      </article>
    </section>

    <section class="card">
      <h2>Channels</h2>
      <div class="table-wrapper">
        <table id="channelsTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Login</th>
              <th>Name</th>
              <th>Status</th>
              <th>Game</th>
              <th>Viewers</th>
              <th>Drops</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <h2>Campaigns</h2>
      <div class="table-wrapper">
        <table id="campaignsTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Game</th>
              <th>Status</th>
              <th>Progress</th>
              <th>Claimed / Total</th>
              <th>Window</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <script src="/webui/main.js"></script>
</body>
</html>
